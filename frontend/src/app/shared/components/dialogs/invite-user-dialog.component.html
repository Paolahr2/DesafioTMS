<div class="invite-user-dialog-bg">
  <div class="invite-user-card">
    <!-- Header -->
    <div class="modal-header">
      <h2 class="invite-user-title">Invitar Colaborador</h2>
    </div>

    <!-- Form -->
    <form class="task-form" [formGroup]="inviteForm">
      <div class="form-row">
        <div class="space-y-2">
          <label class="invite-user-label">Método de invitación</label>
          <div class="relative">
            <select
              formControlName="inviteMethod"
              class="invite-user-input appearance-none">
              <option value="username">Por nombre de usuario</option>
              <option value="email">Por correo electrónico</option>
            </select>
            <div class="absolute right-3 top-3.5 pointer-events-none">
              <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </div>
        </div>

        <!-- Correo electrónico o nombre de usuario -->
        <div class="space-y-2">
          <label class="invite-user-label">
            {{ inviteForm.get('inviteMethod')?.value === 'email' ? 'Correo electrónico' : 'Nombre de usuario' }}
          </label>
          <div class="relative">
            <input
              *ngIf="inviteForm.get('inviteMethod')?.value === 'email'"
              type="email"
              formControlName="Email"
              placeholder="usuario@ejemplo.com"
              class="invite-user-input"
              required>
            <input
              *ngIf="inviteForm.get('inviteMethod')?.value === 'username'"
              type="text"
              formControlName="Username"
              placeholder="@username"
              class="invite-user-input"
              required>
            <div class="absolute left-3 top-3.5">
              <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path *ngIf="inviteForm.get('inviteMethod')?.value === 'email'" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                <path *ngIf="inviteForm.get('inviteMethod')?.value === 'username'" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
              </svg>
            </div>
          </div>
          <div class="invite-user-error" *ngIf="inviteForm.get('inviteMethod')?.value === 'email' && showError('Email')">
            {{ getErrorMessage('Email') }}
          </div>
          <div class="invite-user-error" *ngIf="inviteForm.get('inviteMethod')?.value === 'username' && showError('Username')">
            {{ getErrorMessage('Username') }}
          </div>
        </div>

        <!-- Rol del colaborador -->
        <div class="space-y-2">
          <label class="invite-user-label">Rol del colaborador</label>
          <div class="relative">
            <select
              formControlName="Role"
              class="invite-user-input appearance-none">
              <option value="Observer">Observador</option>
              <option value="Editor">Editor</option>
              <option value="Member">Miembro</option>
            </select>
            <div class="absolute right-3 top-3.5 pointer-events-none">
              <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <!-- Mensaje opcional -->
      <div class="space-y-2 mt-6">
        <label class="invite-user-label">Mensaje (opcional)</label>
        <div class="relative">
          <textarea
            formControlName="Message"
            placeholder="Escribe un mensaje personalizado..."
            rows="3"
            class="invite-user-textarea"></textarea>
          <div class="absolute left-3 top-3.5">
            <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
            </svg>
          </div>
        </div>
      </div>
    </form>

    <!-- Footer -->
    <div class="modal-footer">
      <button
        type="button"
        (click)="onCancel()"
        class="task-cancel-btn">
        Cancelar
      </button>
      <button
        type="button"
        (click)="onInvite()"
        [disabled]="!inviteForm.valid || sending"
        class="task-create-btn">
        <span class="flex items-center">
          <svg
            *ngIf="sending"
            class="animate-spin -ml-1 mr-2 h-5 w-5 text-white"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24">
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          {{ sending ? 'Enviando...' : 'Enviar Invitación' }}
        </span>
      </button>
    </div>
  </div>
</div>